sessionStorage.getItem("selectedBook")&&("notes.html"!==window.location.href.split("/").pop()||sessionStorage.getItem("selectedChapter"))||(window.location.href="../index.html");const e=document.referrer.split("/").pop();if("index.html"===e||"chapters.html"===e||"notes.html"===e||document.referrer.split("/").endsWith("/")||(console.warn("Referrer per la pagina non valido:",document.referrer),sessionStorage.removeItem("selectedBook"),window.location.href="../index.html"),"notes.html"===window.location.href.split("/").pop()&&sessionStorage.getItem("selectedNoteId")){const e=sessionStorage.getItem("selectedNoteId"),t=()=>{const t=document.querySelector(`.note[data-id="${e}"]`);if(t){const e=t.getBoundingClientRect().top+window.scrollY;return window.scrollTo({top:e,behavior:"smooth"}),sessionStorage.removeItem("selectedNoteId"),!0}return!1};if(!t()){const e=new MutationObserver((()=>{t()&&e.disconnect()}));e.observe(document.body,{childList:!0,subtree:!0})}}
