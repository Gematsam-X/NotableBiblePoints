import{B as t}from"./index-C1EFNDRC.js";import{g as e,s as o}from"./indexedDButils-TR8NEaRF.js";import"./idb-nMDuyRcf.js";window.addEventListener("load",(async function(){let r=[];try{let a=await e("userNotes");if(a||(a=(await t.Data.of("NotableBiblePoints").findFirst()).NotablePoints.filter((t=>t.owner===localStorage.getItem("userEmail"))),await o("userNotes",a)),a){let t=a;console.log(t,typeof t),Array.isArray(t)&&t.length>0?r=t:console.warn("Dati in formato errato, ripristino array vuoto.")}}catch(n){return void console.error("Errore nel recupero dei dati:",n)}if(0===r.length)return void console.warn("Nessuna nota trovata.");const a=localStorage.getItem("userEmail"),i=sessionStorage.getItem("selectedBook");if(a&&i){for(const t of r)if(t.owner===a&&t.book===i&&null!=t.chapter){const e=String(t.chapter).trim();document.querySelectorAll(".chapter").forEach((t=>{t.textContent.trim()===e&&t.classList.add("hasNotes")}))}}else console.warn("Dati utente o libro selezionato mancanti.")}));
