import{s as e,h as a}from"./loadingGif-CLxvH4cC.js";import{t as o}from"./toast-BIaIkxlU.js";const t=document.getElementById("signIn"),r=document.getElementById("signUp");t&&t.addEventListener("click",(t=>{t.preventDefault();!async function(t,r){if(t&&r){e();try{const e=await Backendless.UserService.login(t,r,!0);console.log("Utente loggato:",e),localStorage.setItem("userEmail",e.email),localStorage.setItem("userToken",e["user-token"]),window.location.href="../index.html"}catch(n){console.error("Errore nel login:",n);const e=n.message.toLowerCase();e.includes("invalid login or password")?o("Credenziali errate o utente non registrato. Controlla l'email e la password, verifica di essere registrato e riprova."):e.includes("password value cannot be empty")?o("Inserisci la password.",2e3):e.includes("email value cannot be empty")?o("Inserisci l'email.",2e3):e.includes("email address must be confirmed first")?o("Conferma il tuo indirizzo email prima di accedere. Puoi farlo accedendo alla tua posta elettronica e cliccando sul link contenuto nella mail da parte di Backendless.",5e3):e.includes("network error")||e.includes("failed to fetch")?o("Errore di connessione. Controlla la tua rete e riprova."):o(n.message)}finally{a()}}else o("Inserisci sia l'email che la password.")}(document.getElementById("email").value.trim(),document.getElementById("password").value.trim())})),r&&r.addEventListener("click",(t=>{t.preventDefault();!async function(t,r){if(r.length<6)return void o("La password deve contenere almeno 6 caratteri.");console.log("Lunghezza password valida:",r.length),e();const n=new Backendless.User;n.email=t.toLowerCase().trim(),n.password=r,n.name=t.toLowerCase().trim();try{const e=await Backendless.UserService.register(n);console.log("Utente registrato:",e),o("Registrazione riuscita! Controlla la tua email per la conferma.")}catch(i){console.error("Errore durante la registrazione:",i);const e=i.message.toLowerCase();e.includes("already exists")?o("L'utente è già registrato. Prova ad effettuare il login."):e.includes("session timeout")?o("Sessione scaduta. Riprova dopo aver riavviato l'app."):e.includes("network error")||e.includes("failed to fetch")?o("Errore di connessione. Controlla la tua rete e riprova."):e.includes("provided email has wrong format")?o("Inserisci un'email valida."):o(i.message)}finally{a()}}(document.getElementById("newEmail").value.trim(),document.getElementById("newPassword").value.trim())}));
