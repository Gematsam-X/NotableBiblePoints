import{B as e}from"./index-C1EFNDRC.js";import{t as o}from"./toast-BIaIkxlU.js";import{s as r,h as t}from"./loadingGif-CLxvH4cC.js";const a=document.querySelector(".modal");document.querySelector("#recovery").addEventListener("click",(()=>{a.style.display="block"})),document.querySelector(".closeModal").addEventListener("click",(()=>{a.style.display="none",document.querySelector("#emailForRecovery").value=""})),document.querySelector("#recoveryBtn").addEventListener("click",(async i=>{i.preventDefault(),async function(){const i=document.querySelector("#emailForRecovery").value.trim();if(!i)return void o("Inserisci la mail con la quale ti sei registrato su NotableBiblePoints. Se non hai ancora effettuato la registrazione, puoi farlo accedendo all'apposita sezione chiudendo questa finestra.",4100);r();try{const r=e.DataQueryBuilder.create().setWhereClause(`email = '${i}'`),t=await e.Data.of("Users").find(r);if(!t||0===t.length)return a.style.display="none",document.querySelector("#emailForRecovery").value="",void o("Nessun utente trovato con questa email. Puoi registrarti accedendo all'apposita sezione chiudendo questa finestra.",3400);const l=t[0];console.log("Utente trovato:",l),await e.UserService.restorePassword(i),a.style.display="none",document.querySelector("#emailForRecovery").value="",o("Ti è stata inviata un'email per il recupero della password. Clicca sul link contenuto nella mail per procedere.")}catch(l){console.error("Errore durante il recupero dell'utente:",l),o("Si è verificato un errore. Riprova più tardi.",4100)}finally{t()}}()}));
