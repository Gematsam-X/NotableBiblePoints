import{t as e}from"./toast-BIaIkxlU.js";import{s as o,h as t}from"./loadingGif-CLxvH4cC.js";const r=document.querySelector(".modal");document.querySelector("#recovery").addEventListener("click",(()=>{r.style.display="block"})),document.querySelector(".closeModal").addEventListener("click",(()=>{r.style.display="none",document.querySelector("#emailForRecovery").value=""})),document.querySelector("#recoveryBtn").addEventListener("click",(async a=>{a.preventDefault(),async function(){const a=document.querySelector("#emailForRecovery").value.trim();if(!a)return void e("Inserisci la mail con la quale ti sei registrato su NotableBiblePoints. Se non hai ancora effettuato la registrazione, puoi farlo accedendo all'apposita sezione chiudendo questa finestra.",4100);o();try{const o=Backendless.DataQueryBuilder.create().setWhereClause(`email = '${a}'`),t=await Backendless.Data.of("Users").find(o);if(!t||0===t.length)return r.style.display="none",document.querySelector("#emailForRecovery").value="",void e("Nessun utente trovato con questa email. Puoi registrarti accedendo all'apposita sezione chiudendo questa finestra.",3400);const l=t[0];console.log("Utente trovato:",l),await Backendless.UserService.restorePassword(a),r.style.display="none",document.querySelector("#emailForRecovery").value="",e("Ti è stata inviata un'email per il recupero della password. Clicca sul link contenuto nella mail per procedere.")}catch(l){console.error("Errore durante il recupero dell'utente:",l),e("Si è verificato un errore. Riprova più tardi.",4100)}finally{t()}}()}));
